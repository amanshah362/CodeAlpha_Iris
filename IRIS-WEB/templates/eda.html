<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EDA - Iris Dataset</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="fas fa-seedling me-2"></i>Iris Classifier
            </a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/predict">Predict</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="/eda">EDA</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container py-5">
        <h1 class="text-center mb-5">
            <i class="fas fa-chart-bar me-2"></i>Exploratory Data Analysis
        </h1>

        {% if error %}
        <div class="alert alert-danger">
            <i class="fas fa-exclamation-triangle me-2"></i>
            {{ error }}
        </div>
        {% endif %}

        <!-- Dataset Overview -->
        <div class="glass-card p-4 mb-5">
            <h3 class="mb-4"><i class="fas fa-database me-2"></i>Dataset Overview</h3>
            <div class="row">
                <div class="col-md-3 text-center mb-3">
                    <div class="p-3 bg-primary bg-opacity-10 rounded">
                        <h4>150</h4>
                        <p class="mb-0">Total Samples</p>
                    </div>
                </div>
                <div class="col-md-3 text-center mb-3">
                    <div class="p-3 bg-success bg-opacity-10 rounded">
                        <h4>4</h4>
                        <p class="mb-0">Features</p>
                    </div>
                </div>
                <div class="col-md-3 text-center mb-3">
                    <div class="p-3 bg-info bg-opacity-10 rounded">
                        <h4>3</h4>
                        <p class="mb-0">Species</p>
                    </div>
                </div>
                <div class="col-md-3 text-center mb-3">
                    <div class="p-3 bg-warning bg-opacity-10 rounded">
                        <h4>0</h4>
                        <p class="mb-0">Missing Values</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics Table -->
        {% if stats %}
        <div class="glass-card p-4 mb-5">
            <h3 class="mb-4"><i class="fas fa-table me-2"></i>Statistical Summary</h3>
            {{ stats|safe }}
        </div>
        {% endif %}

        <!-- Visualizations -->
        {% if plots %}
        <div class="row">
            <!-- Distribution Plots -->
            <div class="col-12 mb-5">
                <div class="vis-container">
                    <h4 class="mb-4">
                        <i class="fas fa-chart-histogram me-2"></i>Feature Distributions by Species
                    </h4>
                    <img src="data:image/png;base64,{{ plots.distributions }}" 
                         alt="Feature Distributions" class="img-fluid">
                    <p class="mt-3 text-muted">
                        Histograms showing the distribution of each feature across different Iris species.
                        Each species shows distinct patterns in feature distributions.
                    </p>
                </div>
            </div>

            <!-- Box Plots -->
            <div class="col-12 mb-5">
                <div class="vis-container">
                    <h4 class="mb-4">
                        <i class="fas fa-box me-2"></i>Feature Variability (Box Plots)
                    </h4>
                    <img src="data:image/png;base64,{{ plots.boxplots }}" 
                         alt="Box Plots" class="img-fluid">
                    <p class="mt-3 text-muted">
                        Box plots showing the spread and outliers of each feature for different species.
                        Petal measurements show clearer separation between species.
                    </p>
                </div>
            </div>

            <!-- Pair Plot -->
            <div class="col-12 mb-5">
                <div class="vis-container">
                    <h4 class="mb-4">
                        <i class="fas fa-project-diagram me-2"></i>Feature Relationships (Pair Plot)
                    </h4>
                    <img src="data:image/png;base64,{{ plots.pairplot }}" 
                         alt="Pair Plot" class="img-fluid">
                    <p class="mt-3 text-muted">
                        Scatter plot matrix showing relationships between all feature pairs.
                        Clear clusters visible for Setosa species in most feature combinations.
                    </p>
                </div>
            </div>

            <!-- Correlation Heatmap -->
            <div class="col-12 mb-5">
                <div class="vis-container">
                    <h4 class="mb-4">
                        <i class="fas fa-fire me-2"></i>Feature Correlation Heatmap
                    </h4>
                    <img src="data:image/png;base64,{{ plots.heatmap }}" 
                         alt="Correlation Heatmap" class="img-fluid">
                    <p class="mt-3 text-muted">
                        Heatmap showing correlations between different features.
                        Strong positive correlation between petal length and petal width.
                    </p>
                </div>
            </div>
        </div>

        <!-- Insights -->
        <div class="glass-card p-4 mb-5">
            <h3 class="mb-4"><i class="fas fa-lightbulb me-2"></i>Key Insights</h3>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <div class="p-3 bg-light rounded h-100">
                        <h5>Clear Separation</h5>
                        <p>Setosa is clearly separable from the other two species based on petal measurements.</p>
                    </div>
                </div>
                <div class="col-md-6 mb-3">
                    <div class="p-3 bg-light rounded h-100">
                        <h5>Strong Correlations</h5>
                        <p>Petal length and width show strong positive correlation (0.96).</p>
                    </div>
                </div>
                <div class="col-md-6 mb-3">
                    <div class="p-3 bg-light rounded h-100">
                        <h5>Feature Importance</h5>
                        <p>Petal measurements are more discriminative than sepal measurements.</p>
                    </div>
                </div>
                <div class="col-md-6 mb-3">
                    <div class="p-3 bg-light rounded h-100">
                        <h5>Data Quality</h5>
                        <p>No missing values and minimal outliers in the dataset.</p>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Model Info -->
        <div class="glass-card p-4">
            <h3 class="mb-4"><i class="fas fa-robot me-2"></i>Model Information</h3>
            <div class="row">
                <div class="col-md-6">
                    <h5>Algorithm: Logistic Regression</h5>
                    <ul>
                        <li>Polynomial Features (degree=3)</li>
                        <li>Robust Scaling</li>
                        <li>Grid Search CV Optimization</li>
                        <li>Best Parameters: C=1, penalty='l2', solver='lbfgs'</li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h5>Performance Metrics</h5>
                    <ul>
                        <li>Accuracy: 93.33%</li>
                        <li>Precision: 93% (average)</li>
                        <li>Recall: 95% (average)</li>
                        <li>F1-Score: 94% (average)</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer py-4">
        <div class="container text-center">
            <p class="mb-0">Â© 2026 Iris Species Classifier | Exploratory Data Analysis</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>